"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),OnePage=function(){function e(t){_classCallCheck(this,e),this.animComplete=!0,this.mode=t.mode,this.container=t.containerId,this.navbar=t.navbar||!1}return _createClass(e,[{key:"stackMode",value:function(e,t){function n(){if(!s)return!1;this.animComplete=!1,t[s].classList.toggle("active"),s--,t[s].classList.toggle("active"),e[s].classList.toggle("outofview")}function a(){if(s===i-1)return!1;this.animComplete=!1,t[s].classList.toggle("active"),e[s].classList.toggle("outofview"),s++,t[s].classList.toggle("active")}for(var l=this,i=e.length,s=0,o=0,r=0;r<i;r++)e[r].style.zIndex=i-r,e[r].addEventListener("transitionend",function(e){l.animComplete=!0});window.addEventListener("keydown",function(t){if(l.animComplete)if(37!==t.which&&39!==t.which||!e[s].classList.contains("horizontal")){if(38!==t.which&&40!==t.which)return;38===t.which?n.call(l):a.call(l)}else 37===t.which&&o?(console.log(o),o-=1,e[s].style.transform="translate(-"+o+"00vw, 0)"):39===t.which&&o<e[s].children.length-1&&(o+=1,e[s].style.transform="translate(-"+o+"00vw, 0)")}),window.addEventListener("wheel",function(e){if(!l.animComplete)return!1;e.deltaY>0?a.call(l):e.deltaY<0&&n.call(l)});for(var c=0;c<t.length;c++)!function(n){t[n].addEventListener("click",function(a){if(!l.animComplete)return!1;if(t[s].classList.toggle("active"),t[n].classList.toggle("active"),n>s&&s!==i-1){l.animComplete=!1;for(var o=s;o<n;o++)e[o].classList.toggle("outofview");s=n}else if(n<s&&s){l.animComplete=!1;for(var r=s-1;r>=n;r--)e[r].classList.toggle("outofview");s=n}})}(c)}},{key:"normalMode",value:function(e,t,n){var a=this,l=t.length-1,i=0,s=0,o=document.querySelector(".navbar");e.addEventListener("transitionend",function(e){a.animComplete=!0}),window.addEventListener("wheel",function(t){if(!a.animComplete)return!1;t.deltaY>0&&s!==l?(a.animComplete=!1,i+=-100,n[s].classList.toggle("active"),o.style.transform="translateY("+Math.abs(i)+"vh)",e.style.transform="translateY("+i+"vh)",s++,n[s].classList.toggle("active")):t.deltaY<0&&s&&(a.animComplete=!1,i+=100,n[s].classList.toggle("active"),o.style.transform="translateY("+Math.abs(i)+"vh)",e.style.transform="translateY("+i+"vh)",s--,n[s].classList.toggle("active"))});for(var r=0;r<n.length;r++)!function(t){n[t].addEventListener("click",function(l){if(!a.animComplete)return!1;var r=t*-100;r>i?(a.animComplete=!1,i=r,n[s].classList.toggle("active"),o.style.transform="translateY("+Math.abs(i)+"vh)",e.style.transform="translateY("+i+"vh)",s=t,n[s].classList.toggle("active")):r<i&&(a.animComplete=!1,i=r,n[s].classList.toggle("active"),o.style.transform="translateY("+Math.abs(i)+"vh)",e.style.transform="translateY("+i+"vh)",s=t,n[s].classList.toggle("active"))})}(r)}},{key:"initPage",value:function(){var e,t=document.querySelectorAll(".section"),n=document.querySelectorAll(".horizontal");if(n.length>1)for(var a=0;a<n.length;a++){var l=100*n[a].children.length;n[a].style.width=l+"%"}else{var i=100*n[0].children.length;n[0].style.width=i+"%"}if(!t.length)return console.error("Couldn't fetch elements");if(!this.mode)return console.error("You need to specify mode");if(this.navbar&&(e=document.querySelectorAll(".link")),"stack"===this.mode)this.stackMode(t,e);else{if("normal"!==this.mode)return console.error("Unknown mode value");var s=document.querySelector(this.container);if(null===s)return console.error("Couldn't fetch element");this.normalMode(s,t,e)}}}]),e}();